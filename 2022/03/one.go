package main

import (
	"bufio"
	"io"
)

var (
	fields = map[byte]uint64{
		'a': 0b0000000000000000000000000000000000000000000000000000000000000001,
		'b': 0b0000000000000000000000000000000000000000000000000000000000000010,
		'c': 0b0000000000000000000000000000000000000000000000000000000000000100,
		'd': 0b0000000000000000000000000000000000000000000000000000000000001000,
		'e': 0b0000000000000000000000000000000000000000000000000000000000010000,
		'f': 0b0000000000000000000000000000000000000000000000000000000000100000,
		'g': 0b0000000000000000000000000000000000000000000000000000000001000000,
		'h': 0b0000000000000000000000000000000000000000000000000000000010000000,
		'i': 0b0000000000000000000000000000000000000000000000000000000100000000,
		'j': 0b0000000000000000000000000000000000000000000000000000001000000000,
		'k': 0b0000000000000000000000000000000000000000000000000000010000000000,
		'l': 0b0000000000000000000000000000000000000000000000000000100000000000,
		'm': 0b0000000000000000000000000000000000000000000000000001000000000000,
		'n': 0b0000000000000000000000000000000000000000000000000010000000000000,
		'o': 0b0000000000000000000000000000000000000000000000000100000000000000,
		'p': 0b0000000000000000000000000000000000000000000000001000000000000000,
		'q': 0b0000000000000000000000000000000000000000000000010000000000000000,
		'r': 0b0000000000000000000000000000000000000000000000100000000000000000,
		's': 0b0000000000000000000000000000000000000000000001000000000000000000,
		't': 0b0000000000000000000000000000000000000000000010000000000000000000,
		'u': 0b0000000000000000000000000000000000000000000100000000000000000000,
		'v': 0b0000000000000000000000000000000000000000001000000000000000000000,
		'w': 0b0000000000000000000000000000000000000000010000000000000000000000,
		'x': 0b0000000000000000000000000000000000000000100000000000000000000000,
		'y': 0b0000000000000000000000000000000000000001000000000000000000000000,
		'z': 0b0000000000000000000000000000000000000010000000000000000000000000,
		'A': 0b0000000000000000000000000000000000000100000000000000000000000000,
		'B': 0b0000000000000000000000000000000000001000000000000000000000000000,
		'C': 0b0000000000000000000000000000000000010000000000000000000000000000,
		'D': 0b0000000000000000000000000000000000100000000000000000000000000000,
		'E': 0b0000000000000000000000000000000001000000000000000000000000000000,
		'F': 0b0000000000000000000000000000000010000000000000000000000000000000,
		'G': 0b0000000000000000000000000000000100000000000000000000000000000000,
		'H': 0b0000000000000000000000000000001000000000000000000000000000000000,
		'I': 0b0000000000000000000000000000010000000000000000000000000000000000,
		'J': 0b0000000000000000000000000000100000000000000000000000000000000000,
		'K': 0b0000000000000000000000000001000000000000000000000000000000000000,
		'L': 0b0000000000000000000000000010000000000000000000000000000000000000,
		'M': 0b0000000000000000000000000100000000000000000000000000000000000000,
		'N': 0b0000000000000000000000001000000000000000000000000000000000000000,
		'O': 0b0000000000000000000000010000000000000000000000000000000000000000,
		'P': 0b0000000000000000000000100000000000000000000000000000000000000000,
		'Q': 0b0000000000000000000001000000000000000000000000000000000000000000,
		'R': 0b0000000000000000000010000000000000000000000000000000000000000000,
		'S': 0b0000000000000000000100000000000000000000000000000000000000000000,
		'T': 0b0000000000000000001000000000000000000000000000000000000000000000,
		'U': 0b0000000000000000010000000000000000000000000000000000000000000000,
		'V': 0b0000000000000000100000000000000000000000000000000000000000000000,
		'W': 0b0000000000000001000000000000000000000000000000000000000000000000,
		'X': 0b0000000000000010000000000000000000000000000000000000000000000000,
		'Y': 0b0000000000000100000000000000000000000000000000000000000000000000,
		'Z': 0b0000000000001000000000000000000000000000000000000000000000000000,
	}

	priorities = map[uint64]int{
		0b0000000000000000000000000000000000000000000000000000000000000001: 1,
		0b0000000000000000000000000000000000000000000000000000000000000010: 2,
		0b0000000000000000000000000000000000000000000000000000000000000100: 3,
		0b0000000000000000000000000000000000000000000000000000000000001000: 4,
		0b0000000000000000000000000000000000000000000000000000000000010000: 5,
		0b0000000000000000000000000000000000000000000000000000000000100000: 6,
		0b0000000000000000000000000000000000000000000000000000000001000000: 7,
		0b0000000000000000000000000000000000000000000000000000000010000000: 8,
		0b0000000000000000000000000000000000000000000000000000000100000000: 9,
		0b0000000000000000000000000000000000000000000000000000001000000000: 10,
		0b0000000000000000000000000000000000000000000000000000010000000000: 11,
		0b0000000000000000000000000000000000000000000000000000100000000000: 12,
		0b0000000000000000000000000000000000000000000000000001000000000000: 13,
		0b0000000000000000000000000000000000000000000000000010000000000000: 14,
		0b0000000000000000000000000000000000000000000000000100000000000000: 15,
		0b0000000000000000000000000000000000000000000000001000000000000000: 16,
		0b0000000000000000000000000000000000000000000000010000000000000000: 17,
		0b0000000000000000000000000000000000000000000000100000000000000000: 18,
		0b0000000000000000000000000000000000000000000001000000000000000000: 19,
		0b0000000000000000000000000000000000000000000010000000000000000000: 20,
		0b0000000000000000000000000000000000000000000100000000000000000000: 21,
		0b0000000000000000000000000000000000000000001000000000000000000000: 22,
		0b0000000000000000000000000000000000000000010000000000000000000000: 23,
		0b0000000000000000000000000000000000000000100000000000000000000000: 24,
		0b0000000000000000000000000000000000000001000000000000000000000000: 25,
		0b0000000000000000000000000000000000000010000000000000000000000000: 26,
		0b0000000000000000000000000000000000000100000000000000000000000000: 27,
		0b0000000000000000000000000000000000001000000000000000000000000000: 28,
		0b0000000000000000000000000000000000010000000000000000000000000000: 29,
		0b0000000000000000000000000000000000100000000000000000000000000000: 30,
		0b0000000000000000000000000000000001000000000000000000000000000000: 31,
		0b0000000000000000000000000000000010000000000000000000000000000000: 32,
		0b0000000000000000000000000000000100000000000000000000000000000000: 33,
		0b0000000000000000000000000000001000000000000000000000000000000000: 34,
		0b0000000000000000000000000000010000000000000000000000000000000000: 35,
		0b0000000000000000000000000000100000000000000000000000000000000000: 36,
		0b0000000000000000000000000001000000000000000000000000000000000000: 37,
		0b0000000000000000000000000010000000000000000000000000000000000000: 38,
		0b0000000000000000000000000100000000000000000000000000000000000000: 39,
		0b0000000000000000000000001000000000000000000000000000000000000000: 40,
		0b0000000000000000000000010000000000000000000000000000000000000000: 41,
		0b0000000000000000000000100000000000000000000000000000000000000000: 42,
		0b0000000000000000000001000000000000000000000000000000000000000000: 43,
		0b0000000000000000000010000000000000000000000000000000000000000000: 44,
		0b0000000000000000000100000000000000000000000000000000000000000000: 45,
		0b0000000000000000001000000000000000000000000000000000000000000000: 46,
		0b0000000000000000010000000000000000000000000000000000000000000000: 47,
		0b0000000000000000100000000000000000000000000000000000000000000000: 48,
		0b0000000000000001000000000000000000000000000000000000000000000000: 49,
		0b0000000000000010000000000000000000000000000000000000000000000000: 50,
		0b0000000000000100000000000000000000000000000000000000000000000000: 51,
		0b0000000000001000000000000000000000000000000000000000000000000000: 52,
	}
)

func one(r io.Reader) (int, error) {
	var sum int

	var left, right uint64
	scanner := bufio.NewScanner(r)
	for line := 0; scanner.Scan(); line++ {
		text := scanner.Text()
		for i := 0; i < len(text)/2; i++ {
			left |= fields[text[i]]
			right |= fields[text[len(text)-1-i]]
		}
		sum += priorities[left&right]

		left, right = 0, 0
	}

	return sum, nil
}
